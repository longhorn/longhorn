## Longhorn v1.8.0 Release Notes

This latest version of Longhorn introduces several features, enhancements, and bug fixes that are intended to improve system quality and the overall user experience. Highlights include new V2 Data Engine features, multiple backupstores, automatic RWX volume expansion, installation and upgrades via Helm Controller, and V2 Data Engine Support for Talos Linux.

The Longhorn team appreciates your contributions and anticipates receiving feedback regarding this release.

For more information about release-related terminology, see [Releases](https://github.com/longhorn/longhorn#releases).

> [!WARNING]
> An incorrect Longhorn image tag (`v1.8.x-head`) was used in the [deployment manifest](https://github.com/longhorn/longhorn/blob/v1.8.0/deploy/longhorn.yaml) and the [Helm chart](https://github.com/longhorn/longhorn/blob/v1.8.0/chart/values.yaml#L40-L65). The correct tag for Longhorn v1.8.0 images is `v1.8.0`. For more information, see [Issue #10336](https://github.com/longhorn/longhorn/issues/10336). 
>
> If you installed or upgraded Longhorn using the deployment manifest or the Helm chart from the [main Longhorn repository](https://github.com/longhorn/longhorn), perform the following actions to resolve the issue:
>
> - **New installations**: Replace `v1.8.x-head` with `v1.8.0` in the deployment manifest or the Helm chart before deploying Longhorn.
>
> - **Upgrades**: Replace `v1.8.x-head` with `v1.8.0` in the deployment manifest or Helm chart. Next, upgrade the Longhorn system and update the engine image for volumes that use `v1.8.x-head`.
>
> This issue does not affect installations and upgrades performed using the [Longhorn Helm repository](https://charts.longhorn.io). For more details, refer to the [Install with Helm](https://longhorn.io/docs/1.8.0/deploy/install/install-with-helm/) section of the official documentation.

> [!IMPORTANT]
The CSI external-snapshotter was upgraded to v8.2.0. Ensure that all clusters are running Kubernetes v1.25 or later before upgrading to Longhorn v1.8.0 or a later version.

## Deprecation & Incompatibilities

- The default block size for block-type disks in earlier Longhorn releases is 4096 bytes. However, 512 bytes is more commonly used and aligns with the V1 Data Engine's configuration. Additionally, the 4096-byte block size is incompatible with backing images generated by the V1 Data Engine. To address these concerns, the default block size was changed to 512 bytes.

  If you have existing V2 volumes, perform the following steps:

    1. Back up the V2 volumes.
    2. Remove the V2 volumes.
    3. Delete the block-type disk with a 4096-byte block size from `node.spec.disks`.
    4. Erase the old data on the block-type disk using tools such as dd.
    5. Add the disk again to `node.spec.disks` with the updated configuration.
    6. Restore the V2 volumes.

    For more information, see [#10053](https://github.com/longhorn/longhorn/issues/10053).

- A V2 volume data corruption issue that affects earlier Longhorn releases has been resolved in v1.8.0. The issue involves potential continual changes to the checksum of files in a V2 volume with multiple replicas. This occurs because SPDK allocates clusters without initialization, leading to data inconsistencies across replicas. The varying data read from the volume can result in data corruption and broken backups. For more information, see [#10035](https://github.com/longhorn/longhorn/issues/10135).

## Primary Highlights

### New V2 Data Engine Features

Although the V2 Data Engine is still considered an experimental feature in this release, the core functions have been significantly enhanced.

- [Configurable CPU cores](https://longhorn.io/docs/1.8.0/v2-data-engine/features/configurable-cpu-cores): Support the global and node-specific configuration options provide greater control and flexibility for optimizing performance and resource allocation.
- [Disaster recovery (DR) volumes](https://github.com/longhorn/longhorn/issues/6613): Designed to store data in a backup cluster in the event of a failure in the main cluster. DR volumes enhance the resiliency of Longhorn volumes by ensuring data can be quickly restored in case of cluster outages.
- [Auto-salvage volumes](https://github.com/longhorn/longhorn/issues/8430): Automatically repair volumes in the event of a failure.
- [Live migration](https://github.com/longhorn/longhorn/issues/6361): Allow for the migration of volumes from one node to another without interrupting the services using those volumes.
- [Volume encryption](https://github.com/longhorn/longhorn/issues/7355): Ensure data stored in volumes is protected through encryption in transit and at rest.
- [Delta replica rebuilding using snapshot checksum](https://github.com/longhorn/longhorn/issues/9488).
- [Backing image update and download](https://github.com/longhorn/longhorn/issues/6341).


### Multiple Backupstores and Default Backup Target

Starting with v1.8.0, Longhorn allows you to use multiple backupstores for storing backups of Longhorn volumes. Longhorn v1.8.0 also creates a default backup target (`default`) during installation and upgrades. The default backup target is used for system backups and volumes that were created without an assigned backup target name.

[Demo](https://www.youtube.com/watch?v=cvsz6YLDLrM) | [Documentation](https://longhorn.io/docs/1.8.0/snapshots-and-backups/backup-and-restore/set-backup-target/) | [GitHub Issue](https://github.com/longhorn/longhorn/issues/5411)

### Automatic RWX Volume Expansion

Longhorn v1.8.0 supports fully automatic online expansion of RWX volumes without the need to scale down the workload or apply manual commands. To use this feature, ensure that the v1.8.0 versions of Longhorn Manager, Share Manager, and the CSI plugin are all running.

[Documentation](https://longhorn.io/docs/1.8.0/nodes-and-volumes/volumes/expansion/#rwx-volume) | [GitHub Issue](https://github.com/longhorn/longhorn/issues/9736)

### Helm Controller

You can now install and upgrade Longhorn on clusters running RKE2 or K3s using the Helm Controller that is built into those distributions. The Helm Controller manages Helm charts using a HelmChart Custom Resource Definition (CRD), which contains most of the options that would normally be passed to the Helm command-line tool.

[Documentation](https://longhorn.io/docs/1.8.0/deploy/install/install-with-helm-controller/) | [GitHub Issue](https://github.com/longhorn/longhorn/issues/9506)

### V2 Data Engine Support for Talos Linux

Longhorn v1.8.0 supports usage of V2 volumes in Talos Linux clusters. To use this feature, ensure that all nodes meet the V2 Data Engine prerequisites. 

[Documentation](https://longhorn.io/docs/1.8.0/advanced-resources/os-distro-specific/talos-linux-support#v2-data-engine) | [GitHub Issue](https://github.com/longhorn/longhorn/issues/7791)

## Installation

>  [!IMPORTANT]
**Ensure that your cluster is running Kubernetes v1.25 or later before installing Longhorn v1.8.0.**

You can install Longhorn using a variety of tools, including Rancher, Kubectl, and Helm. For more information about installation methods and requirements, see [Quick Installation](https://longhorn.io/docs/1.8.0/deploy/install/) in the Longhorn documentation.

## Upgrade

>  [!IMPORTANT]
**Ensure that your cluster is running Kubernetes v1.25 or later before upgrading from Longhorn v1.7.x to v1.8.0.**

Longhorn only allows upgrades from supported versions. For more information about upgrade paths and procedures, see [Upgrade](https://longhorn.io/docs/1.8.0/deploy/upgrade/) in the Longhorn documentation.

## Post-Release Known Issues

For information about issues identified after this release, see [Release-Known-Issues](https://github.com/longhorn/longhorn/wiki/Release-Known-Issues).

### Highlight
- [FEATURE] Support encrypted v2 volumes [7355](https://github.com/longhorn/longhorn/issues/7355) - @mantissahz @chriscchien
- [FEATURE] Support v2 volume delta replica rebuilding based on snapshot checksum: data plane and control plane [9488](https://github.com/longhorn/longhorn/issues/9488) - @shuo-wu @roger-ryao
- [FEATURE] Multiple backup stores support [5411](https://github.com/longhorn/longhorn/issues/5411) - @mantissahz @roger-ryao
- [FEATURE] Support v2 volume delta replica rebuilding based on snapshot checksum: SPDK part [5573](https://github.com/longhorn/longhorn/issues/5573) - @DamiaSan @roger-ryao
- [IMPROVEMENT] v2 volume supports data locality [9371](https://github.com/longhorn/longhorn/issues/9371) - @derekbit @roger-ryao
- [FEATURE] SPDK volume supports live migration [6361](https://github.com/longhorn/longhorn/issues/6361) - @PhanLe1010 @chriscchien @roger-ryao
- [FEATURE] Support backing image for v2 volume [6341](https://github.com/longhorn/longhorn/issues/6341) - @yangchiu @ChanYiLin @chriscchien
- [FEATURE] Make CPU core configurable for v2 data engine [8835](https://github.com/longhorn/longhorn/issues/8835) - @yangchiu @derekbit
- [FEATURE] Support/verify installing Longhorn Helm chart using helm-controller which is built in k3s and rke2 [9506](https://github.com/longhorn/longhorn/issues/9506) - @yangchiu @james-munson
- [FEATURE] v2 volume supports auto salvage  [8430](https://github.com/longhorn/longhorn/issues/8430) - @c3y1huang @chriscchien
- [FEATURE] v2 volumes supports DR volume [6613](https://github.com/longhorn/longhorn/issues/6613) - @c3y1huang @roger-ryao
- [FEATURE] Talos support for v2 data engine [7791](https://github.com/longhorn/longhorn/issues/7791) - @yangchiu @c3y1huang

### Feature
- [FEATURE] Support Data Engine Option For Backing Image in CSI flow [10084](https://github.com/longhorn/longhorn/issues/10084) - @ChanYiLin @roger-ryao
- [FEATURE] Missing option to modify backup-task retain value from UI while editing recurring job [8810](https://github.com/longhorn/longhorn/issues/8810) - @houhoucoop @roger-ryao
- [UI][FEATURE] Multiple backup stores support [8647](https://github.com/longhorn/longhorn/issues/8647) - @a110605 @roger-ryao
- [UI][FEATURE] Support V2 Backing Image in UI [9880](https://github.com/longhorn/longhorn/issues/9880) - @yangchiu @chriscchien @houhoucoop
- [FEATURE] Add periodic HugePages (2Mi) configuration check to ensure v2 data engine compatibility [9983](https://github.com/longhorn/longhorn/issues/9983) - @yangchiu @jangseon-ryu
- [FEATURE][UI] Fill in the secret and secret namespace when restoring the BackupBackingImage [9490](https://github.com/longhorn/longhorn/issues/9490) - @chriscchien @houhoucoop
- [FEATURE] Add kernel module check for data engine v2 [9915](https://github.com/longhorn/longhorn/issues/9915) - @jangseon-ryu @roger-ryao
- [FEATURE]: Automatic online filesystem resize for RWX volumes. [9736](https://github.com/longhorn/longhorn/issues/9736) - @yangchiu @james-munson
- [FEATURE] Add recurring job label to backup metrics or empty value [9429](https://github.com/longhorn/longhorn/issues/9429) - @ChanYiLin @roger-ryao
- [FEATURE] Longhorn CLI supports darwin platform [9532](https://github.com/longhorn/longhorn/issues/9532) - @derekbit @chriscchien

### Improvement
- [IMPROVEMENT] Bump nfs-ganesha in longhorn-share-manager from v6.3 to v6.5 [10194](https://github.com/longhorn/longhorn/issues/10194) - @derekbit @chriscchien
- [IMPROVEMENT] V2 Data engine avoids changing the data of a lvol when decoupling it from [9922](https://github.com/longhorn/longhorn/issues/9922) - @DamiaSan @roger-ryao
- [IMPROVEMENT] Change the AIO disk block size to 512 bytes for v2 data engine [10053](https://github.com/longhorn/longhorn/issues/10053) - @derekbit @chriscchien
- [IMPROVEMENT] No need to truncate block-type disk's StorageAvailable value [10121](https://github.com/longhorn/longhorn/issues/10121) - @derekbit @chriscchien
- [IMPROVEMENT] Separate the default backup target settings from default settings [10089](https://github.com/longhorn/longhorn/issues/10089) - @mantissahz @roger-ryao
- [IMPROVEMENT] Add support for JSON log format configuration in Longhorn components (UI, driver) [10064](https://github.com/longhorn/longhorn/issues/10064) - @IshinMV @chriscchien
- [IMPROVEMENT] No need to start `tgtd` in an instance-manager pod for v2 data engine [9941](https://github.com/longhorn/longhorn/issues/9941) - @derekbit @roger-ryao
- [IMPROVEMENT] Configure the log level of other system and user managed components via longhorn manager setting [6702](https://github.com/longhorn/longhorn/issues/6702) - @james-munson @roger-ryao
- [IMPROVEMENT] Longhorn CLI should install `cryptsetup` [9315](https://github.com/longhorn/longhorn/issues/9315) - @mantissahz @roger-ryao
- [IMPROVEMENT] Collect and display disk space usage for the backing images [8757](https://github.com/longhorn/longhorn/issues/8757) - @ChanYiLin @roger-ryao
- [IMPROVEMENT] Check NFS versions in /etc/nfsmount.conf instead [9830](https://github.com/longhorn/longhorn/issues/9830) - @COLDTURNIP @roger-ryao
- [IMPROVEMENT] Change misleading error message to warning level [9916](https://github.com/longhorn/longhorn/issues/9916) - @yangchiu @derekbit
- [IMPROVEMENT] No need to redirect `spdk_tgt` log to `/var/log/spdk_tgt.log` [9926](https://github.com/longhorn/longhorn/issues/9926) - @derekbit @chriscchien
- [UI][IMPROVEMENT] Make backup wait until there is no backup being delete and Add the progress time [8750](https://github.com/longhorn/longhorn/issues/8750) - @a110605
- [IMPROVEMENT] Allow specify data engine version for the default storageclass during Helm installation [9584](https://github.com/longhorn/longhorn/issues/9584) - @shuo-wu @chriscchien
- [IMPROVEMENT] Building longhorn-manager takes long time [8744](https://github.com/longhorn/longhorn/issues/8744) - @derekbit @chriscchien
- [IMPROVEMENT] Reject strict-local + RWX volume creation [6735](https://github.com/longhorn/longhorn/issues/6735) - @COLDTURNIP @chriscchien
- [IMPROVEMENT] Restored volume or other operations should be allowed on the old and running instance-manager pods [9383](https://github.com/longhorn/longhorn/issues/9383) - @derekbit @chriscchien
- [IMPROVEMENT] Make backup deletion async and force backup creation wait until there is no backup being delete [8746](https://github.com/longhorn/longhorn/issues/8746) - @ChanYiLin @roger-ryao
- [IMPROVEMENT][UI] Attach table search keyword to URL on Backup pages [9974](https://github.com/longhorn/longhorn/issues/9974) - @chriscchien @houhoucoop
- [IMPROVEMENT] Busrt ISCSI Connection Errors, and IM Pod Restarting to make LH Volume disconnection [9851](https://github.com/longhorn/longhorn/issues/9851) - @ChanYiLin @chriscchien
- [IMPROVEMENT] Why is it not possible to change the replica count in v2 longhorn volume? [9805](https://github.com/longhorn/longhorn/issues/9805) - @hookak @chriscchien
- [IMPROVEMENT][UI] Add backupBackingImage table in backup page with tabs  [8956](https://github.com/longhorn/longhorn/issues/8956) - @chriscchien @houhoucoop
- [IMPROVEMENT] Decrease the reconnect delay of v2 volume nvme initiator [9818](https://github.com/longhorn/longhorn/issues/9818) - @derekbit @chriscchien
- [UI][IMPROVEMENT] Improve the volume size information on UI [8843](https://github.com/longhorn/longhorn/issues/8843) - @yangchiu @houhoucoop
- [IMPROVEMENT] Add dmsetup and dmcrypt utilities check in cli [8217](https://github.com/longhorn/longhorn/issues/8217) - @COLDTURNIP @roger-ryao
- [UI IMPROVEMENT] Collect and display disk space usage for the backing images [9325](https://github.com/longhorn/longhorn/issues/9325) - @chriscchien @houhoucoop
- [IMPROVEMENT] Check kernel module `dm_crypt` on host machines [9153](https://github.com/longhorn/longhorn/issues/9153) - @mantissahz @roger-ryao
- [IMPROVEMENT] Logging the reason why the instance manager pod is going to be deleted. [9886](https://github.com/longhorn/longhorn/issues/9886) - @derekbit @chriscchien
- [IMPROVEMENT] Remove isCLIAPIVersionOne related codes  [7191](https://github.com/longhorn/longhorn/issues/7191) - @derekbit @chriscchien
- [IMPROVEMENT] Prevent Volume Resize Stuck [6633](https://github.com/longhorn/longhorn/issues/6633) - @c3y1huang @roger-ryao
- [IMPROVEMENT] Expose EngineImage CLIAPIVersion and ControllerAPIVersion [6531](https://github.com/longhorn/longhorn/issues/6531) - @chriscchien @houhoucoop
- [IMPROVEMENT] Update longhorn-share-manager's nfs-ganesha to v6.2 [9614](https://github.com/longhorn/longhorn/issues/9614) - @derekbit @chriscchien
- [UI][IMPROVEMENT] Display `ReUploadedDataSize` and `NewlyUploadedDataSize` of each backup on Backup page [8975](https://github.com/longhorn/longhorn/issues/8975) - @yangchiu @houhoucoop
- [IMPROVEMENT] Remove the default CSI component images in longhorn-manager [9580](https://github.com/longhorn/longhorn/issues/9580) - @yangchiu @c3y1huang
- [IMPROVEMENT] the `if-not-present` volume backup policy should also check if the latest backup is up-to-date [6027](https://github.com/longhorn/longhorn/issues/6027) - @c3y1huang @chriscchien
- [IMPROVEMENT] longhorn/go-common-libs should support Darwin [9487](https://github.com/longhorn/longhorn/issues/9487) - @Yu-Jack @chriscchien
- [IMPROVEMENT] Enable Prometheus metrics of the CSI sidecar components  [7938](https://github.com/longhorn/longhorn/issues/7938) - @yangchiu @ChanYiLin
- [IMPROVEMENT] Talos support for environment check in longhorn manager [9558](https://github.com/longhorn/longhorn/issues/9558) - @yangchiu @c3y1huang
- [IMPROVEMENT] Refactor condition icon and text in edit node and disk modal [9238](https://github.com/longhorn/longhorn/issues/9238) - @a110605
- [IMPROVEMENT] Read-only volume monitoring check [8508](https://github.com/longhorn/longhorn/issues/8508) - @ChanYiLin @chriscchien
- [IMPROVEMENT] Fix contradicting node status events [7738](https://github.com/longhorn/longhorn/issues/7738) - @yangchiu @ejweber
- [IMPROVEMENT] Informative warning message for the failed backup/restore lock acquisition [8713](https://github.com/longhorn/longhorn/issues/8713) - @ChanYiLin @roger-ryao
- [IMPROVEMENT] backup backing image should store the secret and secret namespace if it is encrypted [8884](https://github.com/longhorn/longhorn/issues/8884) - @yangchiu @ChanYiLin
- [IMPROVEMENT] Start searching for the new available port from the last allocated port instead of starting from 0th port. [8598](https://github.com/longhorn/longhorn/issues/8598) - @james-munson @chriscchien
- [IMPROVEMENT] Resilience handling for the last replica timeout [8711](https://github.com/longhorn/longhorn/issues/8711) - @yangchiu @ejweber
- [IMPROVEMENT] update `azure-sdk-for-go` version to stable version [8965](https://github.com/longhorn/longhorn/issues/8965) - @mantissahz @chriscchien
- [IMPROVEMENT] `toomanysnapshots` UI element not prominent enough to prevent runaway snapshots [6560](https://github.com/longhorn/longhorn/issues/6560) - @a110605 @roger-ryao

### Bug
- [BUG] insufficient storage;precheck new replica failed after a temporary shutdown of a node [10210](https://github.com/longhorn/longhorn/issues/10210) - @PhanLe1010 @roger-ryao
- [BUG] Checksum of a block device of a v2 volume with multiple replicas might continue to change [10135](https://github.com/longhorn/longhorn/issues/10135) - @derekbit @chriscchien
- [BUG] DR volume gets stuck in `Attaching/Detaching` loop when creating a system backup [10239](https://github.com/longhorn/longhorn/issues/10239) - @yangchiu @mantissahz
- [BUG] Instability after power failure [9978](https://github.com/longhorn/longhorn/issues/9978) - @yangchiu @james-munson
- [BUG] UI Backups list hides the "next 10" buttons [10211](https://github.com/longhorn/longhorn/issues/10211) - @chriscchien @houhoucoop
- [BUG] All Backups are lost in the Backup Target if the NFS Service Disconnects and Reconnects again [9530](https://github.com/longhorn/longhorn/issues/9530) - @yangchiu @mantissahz
- [BUG] Failed to create system backup if a backup volume with the same name as a volume already exists [10215](https://github.com/longhorn/longhorn/issues/10215) - @mantissahz @roger-ryao
- [BUG] v2 engine crash after a rebuilding failure [10212](https://github.com/longhorn/longhorn/issues/10212) - @shuo-wu @chriscchien
- [BUG] CSI plugin pod keep crashing util the backup volume appears  when creation a backup via the CSI snapshotter [10008](https://github.com/longhorn/longhorn/issues/10008) - @mantissahz @chriscchien @roger-ryao
- [BUG] Incorrect field name for backup target in printcolumn [10191](https://github.com/longhorn/longhorn/issues/10191) - @derekbit @mantissahz @roger-ryao
- [BUG] BackupTargetController.bsTimerMap should be protected by lock [10190](https://github.com/longhorn/longhorn/issues/10190) - @derekbit @roger-ryao
- [BUG] Error backups don't appear on Longhorn UI Backup page [10182](https://github.com/longhorn/longhorn/issues/10182) - @yangchiu @a110605 @mantissahz
- [BUG] Fix checksum inconsistent issue after closing the file handler [9876](https://github.com/longhorn/longhorn/issues/9876) - @ChanYiLin @chriscchien
- [BUG] Storage doesn't reschedule in v1.7.2 [10090](https://github.com/longhorn/longhorn/issues/10090) - @yangchiu @PhanLe1010
- [BUG][v1.8.0-rc2] Accidentally encountered errors when uninstalling Longhorn [10104](https://github.com/longhorn/longhorn/issues/10104) - @yangchiu @mantissahz
- [BUG] Unable to upgrade Longhorn from `v1.7.2` to `v1.8.x-head` if there's an error backup [10181](https://github.com/longhorn/longhorn/issues/10181) - @yangchiu @mantissahz
- [BUG][v1.8.x] Can not create backup, backup become in error state immediately [10165](https://github.com/longhorn/longhorn/issues/10165) - @PhanLe1010 @chriscchien
- [BUG][v1.8.x] V2 DR volume becomes faulted if the backup deleted before the activation(test_dr_volume_with_backup_and_backup_volume_deleted) [10160](https://github.com/longhorn/longhorn/issues/10160) - @c3y1huang @chriscchien
- [BUG] engine.status.snapshots of a DR volume is not correctly updated  [10139](https://github.com/longhorn/longhorn/issues/10139) - @derekbit @chriscchien
- [BUG] Replica address is missing in the v2 volume backup status response from spdk engine  [10136](https://github.com/longhorn/longhorn/issues/10136) - @derekbit @chriscchien
- [BUG] V2 volume checksum kept changing [9998](https://github.com/longhorn/longhorn/issues/9998) - @PhanLe1010 @chriscchien
- [BUG] v2 volume replica scheduling failed due to insufficient storage but there is available space on the disks [10116](https://github.com/longhorn/longhorn/issues/10116) - @derekbit @chriscchien
- [BUG] v2 volume/backup created in v1.7.2 get stuck in attaching/detaching loop after upgrade to v1.8.0-rc2 [10131](https://github.com/longhorn/longhorn/issues/10131) - @yangchiu @derekbit
- [BUG][v1.8.0-rc1] Default backup target is periodically cleared [10043](https://github.com/longhorn/longhorn/issues/10043) - @mantissahz @roger-ryao
- [BUG] Test case `test_csi_encrypted_block_volume` fails on GKE COS_CONTAINERD [10049](https://github.com/longhorn/longhorn/issues/10049) - @c3y1huang @chriscchien
- [BUG] race condition of bdev map get could lead to replica being deleted from the spdk server [9953](https://github.com/longhorn/longhorn/issues/9953) - @derekbit @shuo-wu @roger-ryao
- [BUG] Test Case `test_setting` Randomly Fails [10077](https://github.com/longhorn/longhorn/issues/10077) - @mantissahz @roger-ryao
- [BUG] Engine Upgrade to 1.7.1 fails on volumes with strict-local data locality [9389](https://github.com/longhorn/longhorn/issues/9389) - @yangchiu @james-munson
- [BUG] Default disk registration sets Storage Reserved to 0 instead of using storage-reserved-percentage-for-default-disk value (Engine v2 block type only) [9871](https://github.com/longhorn/longhorn/issues/9871) - @jangseon-ryu @chriscchien
- [BUG] Detached Volume Stuck in Attached State During Node Eviction [9781](https://github.com/longhorn/longhorn/issues/9781) - @c3y1huang @chriscchien
- [BUG] Data Not Retained After Restoring System Backup [10058](https://github.com/longhorn/longhorn/issues/10058) - @mantissahz @chriscchien @roger-ryao
- [BUG] v2 Volume Data Locality `Disabled` Behavior Incorrectly (Switches to `Best-Effort` After Node Drain) [9591](https://github.com/longhorn/longhorn/issues/9591) - @mantissahz @roger-ryao
- [BUG] [v1.8.0-rc1] v2 backing image disk download randomly stuck at File processing is not started [10075](https://github.com/longhorn/longhorn/issues/10075) - @ChanYiLin @chriscchien
- [BUG] Test case test_system_backup_and_restore_volume_with_backingimage fails [10057](https://github.com/longhorn/longhorn/issues/10057) - @mantissahz @chriscchien
- [BUG] longhorn-manager seems to crash rpm-DB on the host by continuously calling rpm -q ... [10019](https://github.com/longhorn/longhorn/issues/10019) - @COLDTURNIP @roger-ryao
- [BUG] Backing Image Creation with Multiple Copies Fails in Loop [9976](https://github.com/longhorn/longhorn/issues/9976) - @ChanYiLin @roger-ryao
- [BUG] Webhook servers initialization blocks longhorn-manager from running [10054](https://github.com/longhorn/longhorn/issues/10054) - @c3y1huang @chriscchien
- [BUG] Missing `fromBackup` Parameter in API Request When Restoring Multiple Files from Backup List [10050](https://github.com/longhorn/longhorn/issues/10050) - @a110605 @roger-ryao
- [BUG] Unable to backup backing image through Longhorn UI [10023](https://github.com/longhorn/longhorn/issues/10023) - @a110605 @ChanYiLin @chriscchien
- [BUG] Unable to update volume backup target in volume detail page [10045](https://github.com/longhorn/longhorn/issues/10045) - @a110605 @chriscchien
- [BUG] Unable to delete backing image backup through UI [10047](https://github.com/longhorn/longhorn/issues/10047) - @chriscchien @houhoucoop
- [BUG] Frequent Failures When Uploading 512MB Backing Image [9975](https://github.com/longhorn/longhorn/issues/9975) - @ChanYiLin @roger-ryao
- [BUG][v1.8.0-rc1] Error Status When Setting BackupTarget to AWS S3 [10026](https://github.com/longhorn/longhorn/issues/10026) - @mantissahz @roger-ryao
- [BUG] Unable to restore latest backup from backup page [10046](https://github.com/longhorn/longhorn/issues/10046) - @mantissahz @roger-ryao
- [BUG] Raw format backing image unable to transfer to other nodes to maintain minimum number of copies in Talos v1.8.3 [9882](https://github.com/longhorn/longhorn/issues/9882) - @yangchiu @ChanYiLin
- [BUG][v1.8.x] Unable to add block disk after node deleted and added back [10035](https://github.com/longhorn/longhorn/issues/10035) - @yangchiu @derekbit
- [BUG] Test case `test_backup_volume_list` failed: failed to find backup in `bv.backupList().data` [9987](https://github.com/longhorn/longhorn/issues/9987) - @yangchiu @mantissahz
- [BUG] BackupBackingImage Create failed because it failed to get the BackingImage [10020](https://github.com/longhorn/longhorn/issues/10020) - @ChanYiLin @chriscchien
- [BUG] Error creating backup for v2 volume [10013](https://github.com/longhorn/longhorn/issues/10013) - @yangchiu @ChanYiLin
- [BUG] Backup does not appear on the backup page [9985](https://github.com/longhorn/longhorn/issues/9985) - @yangchiu @mantissahz
- [BUG] volume FailedMount - Input/output error [9939](https://github.com/longhorn/longhorn/issues/9939) - @yangchiu @PhanLe1010
- [BUG] (v2 volume) orphan longhorn device and dm device on the node when IM pod crash [9959](https://github.com/longhorn/longhorn/issues/9959) - @c3y1huang @chriscchien
- [BUG] Test case `Stopped replicas on deleted nodes should not be counted as healthy replicas when draining nodes` fails [9616](https://github.com/longhorn/longhorn/issues/9616) - @yangchiu @derekbit
- [BUG] Test case test_node_eviction_multiple_volume failed to reschedule replicas after volume detached [9857](https://github.com/longhorn/longhorn/issues/9857) - @yangchiu @c3y1huang
- [BUG] Fast-failover lease needs a fail-safe mechanism to clear delinquent state. [9093](https://github.com/longhorn/longhorn/issues/9093) - @yangchiu @james-munson
- [BUG] Fail to create v2 volume from VolumeSnapshot with Source:snapshotHandle as Backup [9965](https://github.com/longhorn/longhorn/issues/9965) - @derekbit @chriscchien
- [BUG] v2 volume restoration fail if the backup is created by csi-snapshotter [9962](https://github.com/longhorn/longhorn/issues/9962) - @derekbit @chriscchien
- [BUG] v2 volume stuck in crash loop due to replica r.ActiveChain is out of sync [9942](https://github.com/longhorn/longhorn/issues/9942) - @shuo-wu @roger-ryao
- [BUG] Old backups are not cleaned up after timeout [8319](https://github.com/longhorn/longhorn/issues/8319) - @yangchiu @mantissahz
- [BUG] CLI check preflight glosses over absence of NFS installation. [9495](https://github.com/longhorn/longhorn/issues/9495) - @COLDTURNIP @roger-ryao
- [BUG] Backport lvol flush implementation from `spdk:v24.01` to `spdk:v24.09` and fix memory leak [8730](https://github.com/longhorn/longhorn/issues/8730) - @yangchiu @DamiaSan
- [BUG] v2 volume cannot be attach after upgrading [9943](https://github.com/longhorn/longhorn/issues/9943) - @derekbit @roger-ryao
- [BUG] Longhorn is unable to provision volumes larger than 20TB [9221](https://github.com/longhorn/longhorn/issues/9221) - @derekbit @chriscchien @DamiaSan
- [BUG] Longhorn v2 volume is stuck in detaching/attaching loop forever if replica crash  [9919](https://github.com/longhorn/longhorn/issues/9919) - @derekbit @chriscchien
- [BUG] v2 volume may enter ERROR state after deleting an instance manager containing a replica [9874](https://github.com/longhorn/longhorn/issues/9874) - @derekbit @roger-ryao
- [BUG] DR volume fails to reattach and faulted after node stop and start during incremental restore [9752](https://github.com/longhorn/longhorn/issues/9752) - @c3y1huang @roger-ryao
- [BUG] Backup progress should not add block failed to upload to successful count [9791](https://github.com/longhorn/longhorn/issues/9791) - @derekbit @chriscchien
- [BUG] v2 volume faulted during degraded availability restore [9852](https://github.com/longhorn/longhorn/issues/9852) - @c3y1huang @chriscchien
- [BUG] Longhorn volume cannot attach to new node permanently if shutdown the current attached node.  [9854](https://github.com/longhorn/longhorn/issues/9854) - @yangchiu @PhanLe1010
- [BUG] Replica deletion fails at the end of longhorn-spdk-engine unit test [9121](https://github.com/longhorn/longhorn/issues/9121) - @shuo-wu @chriscchien
- [BUG] UnknowOS Message in Longhorn Node Condition on RHEL [9829](https://github.com/longhorn/longhorn/issues/9829) - @yangchiu @mantissahz @jangseon-ryu
- [BUG] Failed to inspect the backup backing image information if NFS backup target URL with options [9702](https://github.com/longhorn/longhorn/issues/9702) - @yangchiu @mantissahz
- [BUG] Longhorn keeps resetting my storageClass [9391](https://github.com/longhorn/longhorn/issues/9391) - @yangchiu @mantissahz
- [BUG] Pre-upgrade pod should event the reason for any failures. [9569](https://github.com/longhorn/longhorn/issues/9569) - @yangchiu @james-munson
- [BUG] nvme cli somehow shows the error `malloc(): unsorted double linked list corrupted` [7693](https://github.com/longhorn/longhorn/issues/7693) - @DamiaSan @roger-ryao
- [BUG] Host machine is somehow reboot when running into IO timeout [7697](https://github.com/longhorn/longhorn/issues/7697) - @DamiaSan @roger-ryao
- [BUG] `spdk_tgt` is somehow crashed [7559](https://github.com/longhorn/longhorn/issues/7559) - @DamiaSan
- [BUG] longhornctl install preflight --operating-system=cos failed on COS_CONTAINERD [9664](https://github.com/longhorn/longhorn/issues/9664) - @c3y1huang @chriscchien
- [BUG] PV Annotation Isn't Updated After Creating An Oversize Volume [9514](https://github.com/longhorn/longhorn/issues/9514) - @c3y1huang @chriscchien
- [BUG] System Restore Stuck at Pending due to Tolerations not Applied [8656](https://github.com/longhorn/longhorn/issues/8656) - @yangchiu @c3y1huang
- [BUG] Instance manager missing required selector labels after manager crash [9464](https://github.com/longhorn/longhorn/issues/9464) - @c3y1huang @chriscchien
- [BUG] Single Replica Node Down test cases fail [9622](https://github.com/longhorn/longhorn/issues/9622) - @yangchiu @c3y1huang
- [BUG] Disks modal broken layout [9629](https://github.com/longhorn/longhorn/issues/9629) - @a110605 @roger-ryao
- [BUG] Volume creation violated numberOfReplicas spec causing an unexpected engine image reference count [8573](https://github.com/longhorn/longhorn/issues/8573) - @yangchiu @ChanYiLin
- [BUG] kubectl drain node is blocked by unexpected orphan engine processes [6552](https://github.com/longhorn/longhorn/issues/6552) - @yangchiu @PhanLe1010 @ejweber
- [BUG] Remove unnecessary restart of RWX workload. [9095](https://github.com/longhorn/longhorn/issues/9095) - @yangchiu @james-munson
- [BUG] Fix test case test_rwx_delete_share_manager_pod failure after changes to RWX workload restart. [9504](https://github.com/longhorn/longhorn/issues/9504) - @yangchiu @james-munson
- [BUG] longhorn-spdk-engine fail to build [9517](https://github.com/longhorn/longhorn/issues/9517) - @derekbit
- [BUG] Volume stuck in degraded [9279](https://github.com/longhorn/longhorn/issues/9279) - @yangchiu @PhanLe1010
- [BUG] Resize RWX PVC Fails [6050](https://github.com/longhorn/longhorn/issues/6050) - @james-munson @roger-ryao
- [BUG] Longhorn did not close and open encrypted volumes correctly when the service k3s-agent restarted for a while [9385](https://github.com/longhorn/longhorn/issues/9385) - @yangchiu @mantissahz
- [BUG] Faulted RWX volume upon creation [7802](https://github.com/longhorn/longhorn/issues/7802) - @yangchiu @james-munson
- [BUG] Accidentally encountered a single replica volume backup stuck at progress 17% indefinitely after a node rebooted  [9168](https://github.com/longhorn/longhorn/issues/9168) - @ChanYiLin
- [BUG] Longhorn thinks node is unschedulable [9011](https://github.com/longhorn/longhorn/issues/9011) - @c3y1huang @roger-ryao
- [BUG] System Backup Fails and DR Volume Enters Attach-Detach Loop When Volume Backup Policy is Set to `Always` [9330](https://github.com/longhorn/longhorn/issues/9330) - @c3y1huang @roger-ryao
- [BUG] v1 volume replica rebuild fail after upgrade from v1.7.0 to v1.7.1-rc1 [9331](https://github.com/longhorn/longhorn/issues/9331) - @yangchiu @PhanLe1010
- [BUG] LH fails silently when node has attached volumes [9183](https://github.com/longhorn/longhorn/issues/9183) - @yangchiu @ejweber @w13915984028
- [BUG] Fix security issues in v1.7.1 RC images [9354](https://github.com/longhorn/longhorn/issues/9354) - @c3y1huang
- [BUG] Some volumes stuck in "Attaching" state after upgrade to 1.7.0 [9267](https://github.com/longhorn/longhorn/issues/9267) - @ChanYiLin @roger-ryao
- [BUG] [Backupstore] Need to close the reader after downloading files for the Azure backup store driver. [9281](https://github.com/longhorn/longhorn/issues/9281) - @yangchiu @mantissahz
- [BUG] v2-data-engine setting validator doesn't take disabled nodes into account when checking hugepages [9319](https://github.com/longhorn/longhorn/issues/9319) - @tserong @roger-ryao
- [BUG] error logs appeared in uninstallation job [9303](https://github.com/longhorn/longhorn/issues/9303) - @ChanYiLin @chriscchien
- [BUG] Incorrect NFS endpoint after enable/disable storage network for RWX volume [9272](https://github.com/longhorn/longhorn/issues/9272) - @Vicente-Cheng @roger-ryao
- [BUG][v1.7.x-head] Test case `test_dr_volume_with_backup_block_deletion_abort_during_backup_in_progress` failed due to `failed lock *.lck type 1 acquisition` [9037](https://github.com/longhorn/longhorn/issues/9037) - @ChanYiLin @chriscchien
- [BUG] Test case test_support_bundle_should_not_timeout timed out [8507](https://github.com/longhorn/longhorn/issues/8507) - @c3y1huang

### Performance
- [TASK] An Investigation for Future Longhorn performance [9552](https://github.com/longhorn/longhorn/issues/9552) - @PhanLe1010
- [TASK] Performance benchmark of v1.7.0 [9350](https://github.com/longhorn/longhorn/issues/9350) - @derekbit

### Misc
- [TASK] Fix CVE issues for v1.8.0 [9895](https://github.com/longhorn/longhorn/issues/9895) - @c3y1huang
- [TASK] Verify Longhorn v1.8.0 on Talos v1.8.3 [9764](https://github.com/longhorn/longhorn/issues/9764) - @yangchiu @roger-ryao
- [DOC] Use experimental for alpha features and preview for beta features [9794](https://github.com/longhorn/longhorn/issues/9794) - @derekbit
- [REFACTOR] Consolidate the replica related maps such as bdev map, mode map and address map in SPDK engine [9244](https://github.com/longhorn/longhorn/issues/9244) - @yangchiu @shuo-wu
- [IMPROVEMENT] Encrypted volume online expansion support after k8s 1.29 [9902](https://github.com/longhorn/longhorn/issues/9902) - @COLDTURNIP @mantissahz @chriscchien
- [DOC] Add an important note about checking items before upgrade [9440](https://github.com/longhorn/longhorn/issues/9440) - @james-munson @chriscchien
- [TASK] Bump nfs-ganesha to v6.3 [9979](https://github.com/longhorn/longhorn/issues/9979) - @james-munson @chriscchien
- [TASK] No need to add `kind/test` tickets to Longhorn Sprint board [9873](https://github.com/longhorn/longhorn/issues/9873) - @yangchiu
- [TASK] Creation of longhorn-v24.09 branch [9700](https://github.com/longhorn/longhorn/issues/9700) - @DamiaSan @roger-ryao
- [DOC] Emphasize the backupstore cannot set retention policy [9795](https://github.com/longhorn/longhorn/issues/9795) - @derekbit @roger-ryao
- [FEATURE] Inquiry: Storage Reserved Change for Block Type Disks in Engine v2 [9842](https://github.com/longhorn/longhorn/issues/9842) - @derekbit @jangseon-ryu @chriscchien
- [TASK] Install the latest grpc_health_probe at build time [9714](https://github.com/longhorn/longhorn/issues/9714) - @yangchiu @c3y1huang
- [TASK] Upgrade nvme-cli to v2.10.2 [9739](https://github.com/longhorn/longhorn/issues/9739) - @derekbit
- [TASK] Fix CVE issues in support bundle [9658](https://github.com/longhorn/longhorn/issues/9658) - @yangchiu @c3y1huang
- [TASK] Update CSI components [9561](https://github.com/longhorn/longhorn/issues/9561) - @c3y1huang
- [DOC] Clarify RWX volume expansion documentation [6216](https://github.com/longhorn/longhorn/issues/6216) - @james-munson @roger-ryao
- [DOC] Update `Kubernetes Version` in `Best Practices` [9497](https://github.com/longhorn/longhorn/issues/9497) - @derekbit
- [TASK] Check Longhorn compatibility with more kind of Linux distros [4900](https://github.com/longhorn/longhorn/issues/4900) - @ChanYiLin @roger-ryao
- [TASK] Down size longhorn CLI [8995](https://github.com/longhorn/longhorn/issues/8995) - @c3y1huang

## Contributors
- @COLDTURNIP 
- @ChanYiLin 
- @DamiaSan 
- @IshinMV 
- @PhanLe1010 
- @Vicente-Cheng 
- @Yu-Jack 
- @a110605 
- @c3y1huang 
- @chriscchien 
- @derekbit 
- @ejweber 
- @hookak 
- @houhoucoop 
- @innobead 
- @james-munson 
- @jangseon-ryu 
- @mantissahz 
- @roger-ryao 
- @shuo-wu 
- @tserong 
- @w13915984028 
- @yangchiu 
- @jillian-maroket 
- @jhkrug
- @rebeccazzzz
- @forbesguthrie
- @asettle
